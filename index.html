<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- SEO Meta Tags -->
    <meta name="title" content="Deep Sleeper | 睡眠工程师">
    <meta name="description" content="专业睡眠工程师，提供深度睡眠优化、梦境设计、床铺架构服务。已帮助7300+人改善睡眠质量。">
    <meta name="keywords" content="睡眠优化,深度睡眠,梦境设计,睡眠工程师">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Deep Sleeper">
    <meta name="theme-color" content="#0a0a0a">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content=".">
    <meta property="og:title" content="Deep Sleeper | 睡眠工程师">
    <meta property="og:description" content="专业睡眠工程师，提供深度睡眠优化服务">
    <meta property="og:image" content="Profile.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content=".">
    <meta property="twitter:title" content="Deep Sleeper | 睡眠工程师">
    <meta property="twitter:description" content="专业睡眠工程师，提供深度睡眠优化服务">
    <meta property="twitter:image" content="Profile.png">
    
    <title>Deep Sleeper | 睡眠工程师 | 构建雅致高效的睡眠体系</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="Profile.png">
    <link rel="apple-touch-icon" href="Profile.png">
    
    <!-- 样式表 -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="components.css">
    
    <!-- 字体预加载 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    
    <!-- CloudBase SDK引入 -->
    <script src="https://cdn.jsdelivr.net/npm/@cloudbase/js-sdk@2.11.2/dist/index.umd.min.js"></script>
    
    <!-- 🎵 白噪音音频 -->
    <audio id="sleepAmbient" loop preload="auto">
        <!-- 移除外部音频链接，避免跨域问题 -->
    </audio>
    
    <!-- JSON-LD结构化数据 -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ProfessionalService",
      "name": "Deep Sleeper",
      "description": "专业睡眠工程师",
      "url": "https://sleep-engineer.com",
      "contactPoint": {
        "@type": "ContactPoint",
        "email": "1762079094@qq.com",
        "contactType": "睡眠咨询"
      }
    }
    </script>
</head>
<body>
    <!-- 🎬 加载动画 -->
    <div id="loader">
        <div class="loader-circle"></div>
    </div>

    <!-- 📱 移动端菜单按钮 -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="打开导航菜单" aria-expanded="false">
        <span></span><span></span><span></span>
    </button>

    <!-- 🎯 左侧垂直导航 -->
    <nav class="sidebar" id="sidebar" role="navigation" aria-label="主导航">
        <div class="nav-logo" aria-label="网站标识">Z</div>
        <ul class="nav-menu">
            <li><a href="#home" data-text="Home" aria-label="首页">01</a></li>
            <li><a href="#about" data-text="About" aria-label="关于我">02</a></li>
            <li><a href="#services" data-text="Services" aria-label="服务">03</a></li>
            <li><a href="#portfolio" data-text="Portfolio" aria-label="作品集">04</a></li>
            <li><a href="#contact" data-text="Contact" aria-label="联系">05</a></li>

        </ul>
        <div class="nav-footer" aria-label="版权信息">© 2024</div>
    </nav>

    <!-- 🎭 英雄区域 -->
    <section class="hero" id="home">
        <div class="hero-visual">
            <img src="hero-bg.jpg" alt="睡眠主题背景图" class="hero-bg" loading="eager">
            <div class="hero-overlay" aria-hidden="true"></div>
        </div>
        <div class="hero-content">
            <div class="profile-visual">
                <img src="Profile.png" alt="Deep Sleeper - 睡眠工程师个人头像" class="profile-img" id="profileImg" loading="eager" onerror="this.onerror=null; this.style.display='none';">
                <div class="profile-ring" aria-hidden="true"></div>
            </div>
            <h1 class="hero-title">
                <span class="title-line">DEEP SLEEPER</span>
                <span class="title-line highlight">SLEEP ENGINEER</span>
            </h1>
            <p class="hero-subtitle" id="subtitle"></p>
            <div class="hero-meta">
                <span class="location" data-full="Wuhan University of Technology">BASED IN WUT</span>
                <span class="meta-divider">•</span>
                <span>SINCE 2024</span>
            </div>
            <button class="cta-button" aria-label="探索睡眠艺术" onclick="document.getElementById('about').scrollIntoView({behavior: 'smooth'})">
                <span>探索睡眠艺术</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M7 17L17 7M17 7H7M17 7V17"/>
                </svg>
            </button>
        </div>
        <div class="scroll-indicator">
            <div class="scroll-line"></div>
        </div>
    </section>

    <!-- 📊 数据展示 -->
    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" data-target="7300">0</div>
                    <div class="stat-label">已完成睡觉</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" data-target="20">0</div>
                    <div class="stat-label">年从业经验</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">客户满意度</div>
                </div>
            </div>
        </div>
    </section>

    <!-- 🎯 关于我 -->
    <section class="about" id="about">
        <div class="container">
            <h2 class="section-title">About Me</h2>
            <div class="about-content">
                <p class="about-intro">热衷的睡觉崇拜者，专注于构建雅致高效的睡眠体系。</p>
                <p class="about-desc">我擅长于构建现代睡觉体系，将睡姿美观和安静融为一体，凭借在学校学习的专业知识，我可以通过简洁的方式把睡觉体验付诸现实。我的工作方法融合了传统的睡眠优越性和现代的技术卓越性，确保每次睡觉不仅满足需求，更超出预期。</p>
            </div>
        </div>
    </section>

    <!-- 📊 睡眠服务体系 -->
    <section class="services" id="services">
        <div class="container">
            <h2 class="section-title">Sleep Architecture</h2>
            <div class="services-grid">
                <div class="service-item">
                    <div class="service-number">01</div>
                    <h3>硬床 · 软床 · 枕头被子优化</h3>
                    <p>构建可安睡床铺，从底层架构保障睡眠质量</p>
                </div>
                <div class="service-item">
                    <div class="service-number">02</div>
                    <h3>纳米级精准实现</h3>
                    <p>流畅入睡体验，无障碍梦游设计，让每个睡姿都优雅</p>
                </div>
                <div class="service-item">
                    <div class="service-number">03</div>
                    <h3>全线解决方案</h3>
                    <p>Node.js、数据库SQL设计、API开发、云部署（梦里也会）</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 🎨 睡眠项目案例 -->
    <section class="portfolio" id="portfolio">
        <div class="container">
            <h2 class="section-title">Dream Projects</h2>
            <div class="portfolio-grid">
                <div class="portfolio-item">
                    <img src="https://images.unsplash.com/photo-1506126613408-eca07ce68773?w=800&h=600&fit=crop" alt="智能睡眠舱系统项目展示图" loading="lazy">
                    <div class="portfolio-info">
                        <h3>智能睡眠舱系统</h3>
                        <p>AI驱动的个性化睡眠环境调节</p>
                        <div class="project-tags" role="list">
                            <span class="tag" role="listitem">💤 深度睡眠</span>
                            <span class="tag" role="listitem">🌙 梦境重构</span>
                            <span class="tag" role="listitem">⏰ REM优化</span>
                        </div>
                    </div>
                </div>
                <div class="portfolio-item">
                    <img src="https://images.unsplash.com/photo-1531353826977-0941b4779a1c?w=800&h=600&fit=crop" alt="梦境可视化平台项目展示图" loading="lazy">
                    <div class="portfolio-info">
                        <h3>梦境可视化平台</h3>
                        <p>将脑波数据转化为沉浸式视觉体验</p>
                        <div class="project-tags" role="list">
                            <span class="tag" role="listitem">💤 深度睡眠</span>
                            <span class="tag" role="listitem">🌙 梦境重构</span>
                            <span class="tag" role="listitem">⏰ REM优化</span>
                        </div>
                    </div>
                </div>
                <div class="portfolio-item">
                    <img src="https://images.unsplash.com/photo-1511295742362-92c96b1cf484?w=800&h=600&fit=crop" alt="云端睡眠档案馆项目展示图" loading="lazy">
                    <div class="portfolio-info">
                        <h3>云端睡眠档案馆</h3>
                        <p>基于区块链的睡眠数据确权与交易</p>
                        <div class="project-tags" role="list">
                            <span class="tag" role="listitem">💤 深度睡眠</span>
                            <span class="tag" role="listitem">🌙 梦境重构</span>
                            <span class="tag" role="listitem">⏰ REM优化</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 💬 联系 -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title">Connect</h2>
            <p class="contact-desc">Currently accepting sleep consultation requests</p>
            <div class="contact-links">
                <a href="mailto:1762079094@qq.com" class="contact-link" id="emailLink" onclick="copyEmail(event); return false;" aria-label="复制邮箱地址">1762079094@qq.com</a>
                <a href="https://github.com/sleeper" target="_blank" rel="noopener noreferrer" class="contact-link" aria-label="访问GitHub主页">GitHub</a>
                <a href="https://wechat.com/sleeper" target="_blank" rel="noopener noreferrer" class="contact-link" aria-label="访问微信主页">WeChat</a>
            </div>
        </div>
    </section>

    <!-- 💬 留言板区域 -->
    <section class="guestbook-section" id="guestbook">
        <div class="container guestbook-container">
            <h2 class="section-title">💬 留言板</h2>
            
            <!-- 留言表单 -->
            <form class="guestbook-form" id="guestbookForm" novalidate aria-label="留言表单">
                <div class="form-group">
                    <label class="form-label" for="guestName">昵称 *</label>
                    <input type="text" id="guestName" class="form-input" placeholder="请输入您的昵称" required aria-required="true" minlength="2" maxlength="20">
                </div>
                <div class="form-group">
                    <label class="form-label" for="guestMessage">留言 *</label>
                    <textarea id="guestMessage" class="form-textarea" placeholder="分享您的睡眠故事或建议..." required aria-required="true" minlength="5" maxlength="500" rows="5"></textarea>
                    <div class="form-hint">请保持友善，文明发言 💕</div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="form-button" aria-label="提交留言">
                        <span>发表留言</span>
                        <span aria-hidden="true">📝</span>
                    </button>
                </div>
            </form>
            
            <!-- 留言列表 -->
            <div class="guestbook-list" id="guestbookList">
                <div class="guestbook-header">
                    <h3>访客留言</h3>
                    <div class="guestbook-actions">
                        <button class="refresh-btn" onclick="refreshGuestbook()" aria-label="刷新留言">
                            <span>🔄</span>
                        </button>
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-filter="all" onclick="filterMessages('all')">全部</button>
                            <button class="filter-btn" data-filter="active" onclick="filterMessages('active')">正常</button>
                            <button class="filter-btn" data-filter="deleted" onclick="filterMessages('deleted')">已删除</button>
                        </div>
                    </div>
                </div>
                <div class="guestbook-messages" id="guestbookMessages">
                    <!-- 留言将在这里动态加载 -->
                </div>
            </div>
        </div>
    </section>

    <!-- 😴 睡眠数据记录 -->
    <section class="sleep-tracker-section" id="sleep-tracker">
        <div class="container sleep-tracker-container">
            <h2 class="section-title">😴 睡眠记录</h2>
            
            <form class="sleep-tracker-form" id="sleepForm" novalidate aria-label="睡眠记录表单">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="sleepDuration">睡眠时长 (小时) *</label>
                        <div class="slider-container">
                            <input type="range" id="sleepDuration" class="slider" min="0" max="12" step="0.5" value="7" required aria-required="true" aria-label="睡眠时长滑块" aria-valuemin="0" aria-valuemax="12" aria-valuenow="7">
                            <span class="slider-value" id="durationValue" aria-live="polite">7.0h</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="sleepQuality">睡眠质量 (1-10) *</label>
                        <div class="slider-container">
                            <input type="range" id="sleepQuality" class="slider" min="1" max="10" step="1" value="7" required aria-required="true" aria-label="睡眠质量滑块" aria-valuemin="1" aria-valuemax="10" aria-valuenow="7">
                            <span class="slider-value" id="qualityValue" aria-live="polite">7</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="sleepNotes">备注</label>
                    <textarea id="sleepNotes" class="form-textarea" placeholder="记录今天的睡眠感受..." maxlength="200" rows="4" aria-required="false"></textarea>
                </div>
                <button type="submit" class="form-button" aria-label="提交睡眠记录">
                    <span>记录睡眠</span>
                    <span aria-hidden="true">💤</span>
                </button>
            </form>
            
            <!-- 睡眠统计 -->
            <div class="sleep-stats" id="sleepStats">
                <h3>睡眠统计</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="totalSleeps">0</div>
                        <div class="stat-label">记录次数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="avgDuration">0</div>
                        <div class="stat-label">平均时长(h)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="avgQuality">0</div>
                        <div class="stat-label">平均质量</div>
                    </div>
                </div>
            </div>
            
            <!-- AI睡眠质量分析 -->
            <div class="ai-sleep-analysis-section" id="aiSleepAnalysis">
                <h3>AI睡眠质量分析</h3>
                <div class="ai-analysis-content">
                    <button type="button" class="form-button ai-analysis-btn" id="aiAnalysisBtn">AI智能分析</button>
                    <div class="ai-analysis-result" id="aiAnalysisResult" style="display: none;">
                        <div class="ai-score-section">
                            <div class="ai-score">
                                <div class="score-value" id="aiScore">--</div>
                                <div class="score-label">AI评分</div>
                                <div class="ai-grade" id="aiGrade">--</div>
                            </div>
                            <div class="ai-evaluation" id="aiEvaluation"></div>
                        </div>
                        <div class="ai-insights-section">
                            <h4>睡眠洞察</h4>
                            <ul class="insights-list" id="aiInsights"></ul>
                        </div>
                        <div class="ai-suggestions-section">
                            <h4>个性化建议</h4>
                            <ul class="suggestions-list" id="aiSuggestions"></ul>
                        </div>
                        <div class="risk-assessment" id="riskAssessment" style="display: none;"></div>
                        <div class="detailed-analysis" id="detailedAnalysis" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 📊 睡眠指数显示 -->
    <div class="sleep-index" aria-hidden="true"></div>

    <!-- Noscript 提示 -->
    <noscript>
        <div style="position: fixed; top: 0; left: 0; width: 100%; background: #ff4444; color: white; padding: 1rem; text-align: center; z-index: 10000;">
            此网站需要启用JavaScript才能正常运行。请启用JavaScript后刷新页面。
        </div>
    </noscript>
    

const supabaseUrl = 'https://your-supabase-url.supabase.co';
const supabaseKey = 'your-supabase-anon-key';    
    <!-- 引入Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
    
    <!-- 配置Supabase -->
    <script>
        // 初始化Supabase客户端
        const supabaseUrl = 'https://ogvjglpkgqddbzntaffz.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ndmpnbHBrZ3FkZGJ6bnRhZmZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5Nzg3MzgsImV4cCI6MjA4MTU1NDczOH0.uvA1YW8ndZbA6itvN8lbE5zpUrmWtiglOoWBPQ6uKRo';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
    </script>
    
    <!-- 引入交互功能模块 -->
    <script src="script.js"></script>
    <script>
        // 📧 邮箱复制功能
        function copyEmail(event) {
            const email = '1762079094@qq.com';
            const link = event.target;
            const originalText = link.textContent;
            
            // 尝试使用 Clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(email).then(() => {
                    link.textContent = '📧 邮箱已复制！';
                    link.classList.add('copied');
                    setTimeout(() => {
                        link.textContent = originalText;
                        link.classList.remove('copied');
                    }, 2000);
                }).catch(() => {
                    // 如果 Clipboard API 失败，使用备用方法
                    fallbackCopy(email, link, originalText);
                });
            } else {
                // 备用复制方法
                fallbackCopy(email, link, originalText);
            }
        }
        
        function fallbackCopy(text, link, originalText) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                link.textContent = '📧 邮箱已复制！';
                link.classList.add('copied');
                setTimeout(() => {
                    link.textContent = originalText;
                    link.classList.remove('copied');
                }, 2000);
            } catch (err) {
                link.textContent = '📧 点击打开邮箱';
                setTimeout(() => {
                    link.textContent = originalText;
                }, 2000);
            }
            document.body.removeChild(textArea);
        }
        
        // 🎵 用户首次交互后播放白噪音
        let audioInitialized = false;
        function initAudio() {
            if (audioInitialized) return;
            audioInitialized = true;
            
            const audio = document.getElementById('sleepAmbient');
            if (audio) {
                audio.volume = 0.1;
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.catch(err => {
                        console.log('音频播放失败:', err);
                    });
                }
            }
        }
        
        // 监听用户交互
        ['click', 'touchstart', 'keydown'].forEach(eventType => {
            document.body.addEventListener(eventType, initAudio, { once: true, passive: true });
        });
        
        // 错误处理
        window.addEventListener('error', (event) => {
            console.error('页面错误:', event.error);
        });
        
        // 未处理的Promise拒绝
        window.addEventListener('unhandledrejection', (event) => {
            console.error('未处理的Promise拒绝:', event.reason);
        });
    </script>
</body>
</html>
